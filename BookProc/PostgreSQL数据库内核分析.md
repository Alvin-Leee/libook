### 体系结构

---

- Bootstrap模块的作用是？
- Main模块的作用是？
- Postmaster模块的作用是？
- Libpq的作用是？
- Tcop模块的作用是？
- Parser模块的作用是？
- Optimizer模块的作用是？
- Executor模块的作用是？
- Commands模块的作用是？
- Catalog模块的作用是？
- Storage模块的作用是？
- Access模块的作用是？
- Nodes模块的作用是？
- Utils模块的作用是？
- Regex模块的作用是？
- Rewrite模块的作用是？
- Initdb模块的作用是？
- TSearch模块的作用是？
- Psql模块的作用是？
- Port模块的作用是？



- 描述一下DML语句的运行过程（使用上方的几个模块）
- 描述一下DDL语句的运行过程



- 什么是系统表？（存放元数据，系统信息的普通表或视图）
- TOAST表的储存的是什么？
- pg_tablespace在整个数据集簇中有几个
- 每个数据库都有自己的pg_tablespace表吗
- pg_tablespace中每一个元组对应一个表空间，都分配一个什么属性来标识（OID）

- pg_class 存储的是什么？（存储表及与表类似结构的数据库对象信息，索引、序列、视图、复合数据类型、TOAST表等）



- initdb初始化磁盘上的数据存储区，该数据存储区被称作是什么？（数据集簇）
- pg是如何实现数据库的（磁盘上一些文件的集合）
- pg的所有数据存放在哪里（数据目录）
- 数据目录使用什么来进行引用（环境变量PGDATA）



- 初始化时会创建三个数据库：template1、template0和postgres，则哪两个是从另一个拷贝过来的（都是从template1拷贝的，以后创建其他数据库都会从template1进行拷贝）
- 对于每一个具体的数据库，在哪个路径能够找到（PGDATA/base/OID）
- 每个表和索引以什么来进行命名？如果超过1GB后会怎么样？又该如何命名呢？（filenode号，超过会按1GB大小进行分割，分割后按filenode1/filenode2...进行命名）
- 如果一个表的熟悉要存储更大的数据，就要使用什么表来进行关联存储（TOAST表）



- Postgremaster进程是做什么的？psql客户端与它的关系是什么？（守护进程，负责整个系统的启动和关闭，当psql发出连接请求后，其fork出其他进程）
- Postgres是什么进程？psql客户端与它的关系是什么？（服务进程，psql使用网络协议与其进程通信，发送语句，Postgres执行后向客户端发送结果）
- SysLogger是什么进程（系统日志）
- PgStat是什么进程（统计数据收集）
- AutoVacuum（系统自动清理）
- BgWriter是什么进程（后台写进程）
- WalWriter（预写式日志写进程）
- PgArch（预写式日志归档进程）



- Postmaster及其子进程的通信通过什么来实现（共享内存和信号）
- 如果某个后台进程崩溃，会影响其他进程的工作吗？Postmaster应该如何做才能恢复？（不会，只需要重置共享内存即可从单个后台进程的崩溃中恢复）
- 为了防止内存泄露的问题，采用什么方法？（内存上下文）



- 在哪个文件中可以对日志文件的大小进行配置？这样配置大小的好处是什么？（postgresql.conf，日志文件会非常大，不利于文件的保存，因为保存后还要写入内存或磁盘，可以先保存之前写好的文件，然后再重新打开一个文件写入新的信息）
- 后台写进程如果发现该页没有写入缓冲区，应该如何做？请分脏页和非脏页进行描述。如果遇到缓冲区满的情况应该如何解决。P36
- 







### 存储管理

---





### 索引机制

---





### 查询编译器

---





### 查询执行器

---





### 并发控制机制

---



### 安全措施

---

